package wipro.day3.Hospital;
import java.util.ArrayList;
import java.util.List;

// Base class for all users
class User {
    protected String name;
    protected String email;
    protected String phone;

    public User(String name, String email, String phone) {
        this.name = name;
        this.email = email;
        this.phone = phone;
    }

    public String getContactInfo() {
        return "Name: " + name + ", Email: " + email + ", Phone: " + phone;
    }
}

// Patient class
class Patient extends User {
    private List<String> medicalHistory;
    private List<Appointment> appointments;

    public Patient(String name, String email, String phone) {
        super(name, email, phone);
        this.medicalHistory = new ArrayList<>();
        this.appointments = new ArrayList<>();
    }

    public void bookAppointment(Doctor doctor, String dateTime) {
        Appointment appointment = new Appointment(this, doctor, dateTime);
        appointments.add(appointment);
        doctor.addAppointment(appointment);
        System.out.println("Appointment booked with Dr. " + doctor.name + " on " + dateTime);
    }

    public void viewMedicalHistory() {
        System.out.println("Medical History: " + medicalHistory);
    }

    public void makePayment(double amount) {
        System.out.println("Payment of $" + amount + " made successfully.");
    }
}

// Doctor class
class Doctor extends User {
    private String specialization;
    private List<Appointment> appointments;

    public Doctor(String name, String email, String phone, String specialization) {
        super(name, email, phone);
        this.specialization = specialization;
        this.appointments = new ArrayList<>();
    }

    public void addAppointment(Appointment appointment) {
        appointments.add(appointment);
    }

    public void viewAppointments() {
        System.out.println("Appointments for Dr. " + name + ":");
        for (Appointment appointment : appointments) {
            System.out.println(" - " + appointment.dateTime + " with " + appointment.patient.name);
        }
    }

    public void accessPatientRecords(Patient patient) {
        // Simulated access based on specialization
        System.out.println("Accessing records for " + patient.name);
        patient.viewMedicalHistory();
    }
}

// Admin class
class Admin extends User {
    public Admin(String name, String email, String phone) {
        super(name, email, phone);
    }

    public void manageUser Data(User user, String action) {
        System.out.println("Admin action: " + action + " user " + user.name);
    }

    public void generateReport() {
        System.out.println("Generating system-wide report...");
    }
}

// Appointment class
class Appointment {
    Patient patient;
    Doctor doctor;
    String dateTime;

    public Appointment(Patient patient, Doctor doctor, String dateTime) {
        this.patient = patient;
        this.doctor = doctor;
        this.dateTime = dateTime;
    }
}

// Main class to demonstrate functionality
public class HospitalManagementSystem {
    public static void main(String[] args) {
        // Create instances of users
        Patient patient1 = new Patient("John Doe", "john@example.com", "1234567890");
        Doctor doctor1 = new Doctor("Dr. Smith", "smith@example.com", "0987654321", "Cardiology");
        Admin admin1 = new Admin("Admin User", "admin@example.com", "1122334455");

        // Patient books an appointment
        patient1.bookAppointment(doctor1, "2023-10-01 10:00");

        // Doctor views appointments
        doctor1.viewAppointments();

        // Admin manages user data
        admin1.manageUser Data(patient1, "add");
        admin1.generateReport();
    }
}